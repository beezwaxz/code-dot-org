%h1
  Join us for the largest education event in history

%div{:style=>'background-color: white; padding: 10px; border: 10px solid lightgrey; margin-bottom: 20px'}
  = view :indiegogo_progress_bar

%h2{:style=>"margin-top: 0px; width: 100%"} Thank you to all our donors!
%div{:style=>"margin: 0px 20px 20px 0px; float: left; width: 49%"}
  %div{:id=>'list'}
    %ul{:id=>"donors"}
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse
      %li Andre Stackhouse


%div{:style=>"float: left; width: 48.5%"}
  %iframe{:width=>"100%", :height=>"310", :src=>"//www.youtube.com/embed/-PoN8cNzSVQ", :frameborder=>"0", :allowfullscreen=>"true"}

:css
  ul {
      list-style: none;
      margin:0;
      padding:0;
  }
  ul > li {
      display: inline-block;
      width: 100%;
  }
  ul > li > ul >li {
      color: red;
  }
  #list {
      -webkit-column-count:3;
      -moz-column-count:3;
      -ms-column-count:3;
      -o-column-count:3;
      column-count:3;
      -webkit-column-gap:15px;
      -moz-column-gap:15px;
      -ms-column-gap:15px;
      -o-column-gap:15px;
      column-gap:15px;
      columns:3;
  }

:javascript
  var contributorCount = 0;
  var interval = 10000;
  var uniqueContributors = [];

  $.ajax({
    url: "/v2/indiegogo_contributions?page=2",
    type: "get",
    dataType: "JSON"
  }).done(function(data) {
    alert("success!");
    var contributions = data["response"];

    // Remove duplicates
    $.each(contributions, function(i, el){
        if(el['by'] !== "Anonymous") {
          uniqueContributors.push(el["by"]);
        }
    });

    contributorCount = uniqueContributors.length;

    uniqueContributors.forEach(function(e) {
      $("#donors").append("<li>" + e + "</li>");
    });
  }).fail(function () {
    alert("fail");
  });